# spec file for GiNaC (not relocatable)

%define ver @VERSION@
%define rel 1
%define prefix /usr

Summary: C++ library for symbolic mathematical calculations
Name: GiNaC
Version: %ver
Release: %rel
Copyright: GPL
Group: Libraries
Source: ftp://ftpthep.physik.uni-mainz.de/pub/GiNaC/GiNaC-%{ver}.tar.gz
BuildRoot: /tmp/GiNaC-%{PACKAGE_VERSION}-root
Packager: Christian Bauer <Christian.Bauer@uni-mainz.de>
URL: http://www.ginac.de/
Prereq: install-info
Docdir: %{prefix}/doc

%description
GiNaC (which stands for "GiNaC is Not a CAS (computer algebra system)") is a
C++ library for symbolic mathematical calculations. It is designed to allow
the creation of integrated systems that embed symbolic manipulations together
with more established areas of computer science (like computation-intense
numeric applications, graphical interfaces, etc.) under one roof.

%prep
%setup

%build
CXXFLAGS="$RPM_OPT_FLAGS" ./configure --prefix=%prefix
if [ "$SMP" != "" ]; then
  (make "MAKE=make -k -j $SMP"; exit 0)
  make
else
  make
fi

%install
rm -rf $RPM_BUILD_ROOT
make prefix=$RPM_BUILD_ROOT%{prefix} install
gzip -9n $RPM_BUILD_ROOT%{prefix}/info/*

%clean
rm -rf $RPM_BUILD_ROOT

%post -p /sbin/ldconfig
install-info %{prefix}/info/ginac.info.gz %{prefix}/info/dir

%postun -p /sbin/ldconfig

%preun
install-info --delete %{prefix}/info/ginac.info.gz %{prefix}/info/dir

%files
%defattr(-, root, root)
%doc AUTHORS COPYING ChangeLog NEWS README
%{prefix}/lib/lib*.so*
%{prefix}/lib/*a
%{prefix}/include/*
%{prefix}/info/ginac.info*
%{prefix}/man/man1/*
%{prefix}/share/doc/GiNaC/*
%{prefix}/bin/*
