%define name @PACKAGE@
%define version @VERSION@
%define release 1

Summary: C++ library for symbolic calculations
Name: %{name}
Version: %{version}
Release: %{release}
Copyright: GPL
Group: System Environment/Libraries
Source: ftp://ftpthep.physik.uni-mainz.de/pub/GiNaC/%{name}-%{version}.tar.gz
BuildRoot: /tmp/%{name}-buildroot
Packager: Christian Bauer <Christian.Bauer@uni-mainz.de>
URL: http://www.ginac.de/
Prereq: /sbin/install-info
Prefix: %{_prefix}
Docdir: %{prefix}/doc

%description
GiNaC (which stands for "GiNaC is Not a CAS (Computer Algebra System)") is an
open framework for symbolic computation within the C++ programming language.

It includes the ginsh ("GiNaC interactive shell") which provides a simple and
easy-to-use CAS-like interface to GiNaC for non-programmers.


%package devel
Summary: Libraries, includes and more to develop GiNaC applications
Group: Development/Libraries
Requires: %{name}

%description devel
GiNaC (which stands for "GiNaC is Not a CAS (Computer Algebra System)") is an
open framework for symbolic computation within the C++ programming language.

This is the libraries, include files and other resources you can use to
develop GiNaC applications.


%prep
rm -rf $RPM_BUILD_ROOT

%setup -q

%build
CXXFLAGS="$RPM_OPT_FLAGS" ./configure --prefix=%{prefix}
if [ "$SMP" != "" ]; then
  (make "MAKE=make -k -j $SMP"; exit 0)
  make
else
  make
fi

%install
rm -rf $RPM_BUILD_ROOT
make prefix=$RPM_BUILD_ROOT/%{prefix} install-strip

%clean
rm -rf $RPM_BUILD_ROOT

%post
/sbin/ldconfig

%postun
/sbin/ldconfig

%post devel
/sbin/install-info %{prefix}/info/ginac.info %{prefix}/info/dir

%preun devel
/sbin/install-info --delete %{prefix}/info/ginac.info %{prefix}/info/dir

%files
%defattr(-, root, root)
%doc AUTHORS COPYING ChangeLog NEWS README
%{prefix}/lib/*.so.*
%{prefix}/man/man1/ginsh.1
%{prefix}/man/man1/viewgar.1
%{prefix}/bin/ginsh
%{prefix}/bin/viewgar

%files devel
%defattr(-, root, root)
%doc AUTHORS COPYING ChangeLog NEWS README
%{prefix}/lib/*.a
%{prefix}/lib/*.la
%{prefix}/lib/*.so
%{prefix}/include/*
%{prefix}/info/*info*
%{prefix}/man/man1/*-config.1
%{prefix}/bin/*-config
%{prefix}/share/doc/%{name}/*
%{prefix}/share/aclocal/*

%changelog
* Wed Jan 26 2000 Christian Bauer <Christian.Bauer@uni-mainz.de>

- split into user and devel packages

* Wed Dec  1 1999 Christian Bauer <Christian.Bauer@uni-mainz.de>

- aclocal macros get installed
